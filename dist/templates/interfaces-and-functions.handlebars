{{#*inline "interfacePartial"}}
export interface {{interfaceName}} {
  {{#each additionalProperties as |prop|}}
  {{prop}}
  {{/each}}
  {{#each columns}}
  "{{propertyName}}"{{#if optional}}?{{/if}}: {{propertyType}} {{#if nullable}}| null {{/if}}
  {{/each}}
}
{{/inline}}
{{#*inline "funcGetAllFieldsPartial"}}
export async function get{{name}}AllFields(client: Knex){
  return client<{{interfaceName}}>("{{name}}")
}
{{/inline}}
{{#*inline "funcGetBasicFieldsPartial"}}
export async function get{{name}}BasicFields(client: Knex){
  type Get{{name}}BasicFieldsOutput = {
    {{#each columns}}
    {{#unless nullable}} 
    "{{propertyName}}"{{#if optional}}?{{/if}}: {{propertyType}} {{#if nullable}}| null {{/if}}
    {{/unless}}
    {{/each}}
  }

  return client
  .from<{{interfaceName}}>("{{name}}")
  .select<Get{{name}}BasicFieldsOutput[]>(
    {{#each columns}}
    {{#unless nullable}} 
    "{{propertyName}}",
    {{/unless}}
    {{/each}}
  )
}
{{/inline}}
{{#*inline "funcAddPartial"}}
export async function add{{name}}(client: Knex, data: {{interfaceName}}){
  return client<{{interfaceName}}>("{{name}}")
    .insert(data)
    .returning([
      {{#each columns}}
      {{#unless nullable}} 
      "{{propertyName}}",
      {{/unless}}
      {{/each}}
    ]);
}
{{/inline}}
{{#*inline "funcDeletePartial"}}
export async function delete{{name}}(client: Knex, where: Partial<{{interfaceName}}>){
  return client<{{interfaceName}}>("{{name}}")
    .where(where)
    .del()
}
{{/inline}}
{{#*inline "funcUpdatePartial"}}
export async function update{{name}}(
  client: Knex, 
  data: Partial<{{interfaceName}}>, 
  where: Partial<{{interfaceName}}>
  ) {
  return client<{{interfaceName}}>("{{name}}")
    .where(where)
    .update(data)
}
{{/inline}}
/* eslint-disable @typescript-eslint/camelcase */
/* eslint-disable @typescript-eslint/class-name-casing */
/*
* This file was generated by a tool.
* Rerun sql-ts to regenerate this file.
*/

import Knex from 'knex';

{{#if config.tableAsNamespace}}
{{#each tables as |table|}}
export namespace {{table.name}} {
  {{> interfacePartial table}}  
  {{> funcGetAllFieldsPartial table}}
  {{> funcGetBasicFieldsPartial table}}
  {{> funcAddPartial table}}
  {{> funcDeletePartial table}}
  {{> funcUpdatePartial table}}
{{/each}}
}
{{else}}
{{#each tables as |table|}}
{{> interfacePartial table}}
{{> funcGetAllFieldsPartial table}}
{{> funcGetBasicFieldsPartial table}}
{{> funcAddPartial table}}
{{> funcDeletePartial table}}
{{> funcUpdatePartial table}}
{{/each}}
{{/if}}